# 2장 JUnit과 Hamcrest

## JUnit
에릭 감마와 켄트 백이 탄생시킨 JUnit은 현재 전 세계적으로 가장 널리 사용되는 Java 단위 테스트 프레임워크이다.
소위 xUnit 시리즈라고 불리는 다양한 테스트 프레임워크에 기원이 되는 프레임워크이다. 오픈스소 프로젝트 방식으로 개발되어 현재까지 꾸준히 버전업을 이루고 있는 테스트 프레임워크이다. JUnit은 단위 테스트를 수행하는 데 있어 기본적으로 다음과 같은 기능을 제공한다.

- 테스트 결과가 예상과 같은지를 판별해주는 단정문(assertions)
- 여러 테스트에서 공용으로 사용할 수 있는 테스트 픽스처(test fixture)
- 테스트 작업을 수행할 수 있게 해주는 테스트 러너(test runner)


### 단정문(assertions)
JUnit은 테스트 케이스의 수행 결과를 판별해주는 다양한 단정문(무언가를 딱 짤라 한마디로 판단하는 짧은 문장)을 제공한다.
즉 두 값의 일치 여부를 판단하는 assert문을 제공한다.

개인적인 생각이지만 JUnit의 assert문 보다 AssertJ의 assert문을 선호한다. 그 이유는 JUnit을 써보면 알겠지만, 값을 비교하는 assert문을 쓰다보면 Hamcrest 라이브러리를 추가적으로 import해야하고 그 과정에서 어느정도 문법을 외워서 작성해야한 경우가 있다. 그냥 되게 불편...하다..그래서 필자는 AssertJ의 assert문을 좀 더 선호한다.

### 텍스트 픽스처(test fixture)
테스트를 반복적으로 수행할 수 있게 도와주고 매번 동일한 결과를 얻을 수 있게 도와주는 **'기반이 되는 상태나 환경'** 을 의미한다. **일괄된 테스트 실행환경** 이라고도 하며, 테스트 컨텍스트(test context)라고 부르기도 한다.


### 테스트 케이스, 테스트 메소드
테스트 케이스(test case)와 테스트 메소드(test method)
테스트 케이스는 테스트 메소드를 작성하기전에 일종의 시나리오를 작성한다는 개념이 강하다
에를 들어 계좌 생성 -> 잔액 조회 -> 입금 기능 -> 출금 조회  이런식으로 어떤 흐름도를 작성하는 과정이 테스트 케이스이고
각 항목별로 메소드를 만들어 테스트하는 행위가 테스트 메소드라고 볼 수 있다.


### 테스트 러너(test runner)

JUnit 프레임워크에서 테스트 클래스 내에 존재하는 각각의 테스트 메소드 실행을 담당하는 클래스이다.
테스트 러너는 테스트 클래스의 구조를 맞게 테스트 메소드를 실행하고 결과를 표시하는 역할을 수행한다. 

- @RunWith

JUnit에 내장된 기본 테스트 러너인 BlockJUnit4ClassRunner 대신에 @RunWith로 지정된 클래스를 이용해 클래스 내의 테스트 메소드를 수행할 수 있도록 지정해주는 어노테이션이다.

- @RunWith(테스트할 클래스 명.class)

일종의 확장지 개념으로도 사용되기에 많은 어플리케이션이나 프레임워크에서 BlockJUnit4ClassRunner를 확장시켜 새로운 테스트 러너를 개발하곤 한다. 예를 들면 스프링 프레임워크에서 @RunWith(SpringRunner.class) 이런식으로 작성하여 스프링 프레임워크를 테스트하는 경우도 있다.

### Hamcrest

JUnit에서 제공하는 테스트 표현식(Assert)을 작성할 때 좀 더 문맥적으로 자연스럽게고 우아한 문장을 만들 수 있게 도와주는 라이브러리이다.

바로 코드로 보면

 ```
    @Test
    public void testGetBalance() throws Exception {
        assertEquals(account.getBalance(), 10000);
    }
 ```
account 클래스에서 getBalance를 호출하면 현 계좌에 남은 금액을 반환해주는 메소드를 테스트하는 테스트 메소드이다.
단순히 단정문을 보면 딱딱하다는 느낌을 받을 수 있다. (물론 아직은 아닐수도) 🤔

하지만 Hamcrest 라이브러리를 이용해 Assert문을 좀 더 우아하게 만들어 보면 이런식으로 표현할 수 있다. 👏

```
    @Test
    public void testGetBalance() throws Exception {
        assertThat(account.getBalance(), is(10000));
    }
```

is라는 메소드 덕에 사람이 읽기 좀 더 편해진거 같다.. 😆